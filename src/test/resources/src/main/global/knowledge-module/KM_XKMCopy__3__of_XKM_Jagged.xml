<?xml version="1.0" encoding="ISO-8859-1"?>
<SunopsisExport>
<Admin RepositoryVersion="05.02.02.08" IsLegacyIdCompatible="false" />
<Encryption algorithm="AES" keyLength="128" exportKeyHash="ghAjh0jNOP+GGz3SSFGPpJB+gBkqV7QOlHS/2Ol3gqU=" keyVect="siqi9UVTPn3t1TbY+eYngg==" exportKeySalt="051e9a47-43f0-400a-9126-ddc7775626c0" containsCipherText="false"/>
<Object class="com.sunopsis.dwg.dbobj.SnpTrt">
		<Field name="CleanupOnError" type="java.lang.String">null</Field>
	<Field name="CompType" type="java.lang.String"><![CDATA[Jagged]]></Field>
	<Field name="DelegateClass" type="java.lang.String"><![CDATA[XKM_Jagged]]></Field>
	<Field name="DelegateScript" type="java.lang.String"><![CDATA[
      
import oracle.odi.domain.adapter.project.IKnowledgeModule.ProcessingType
import oracle.odi.domain.adapter.topology.ITechnology
import oracle.odi.domain.adapter.topology.ILocation 
import oracle.odi.domain.mapping.*
import oracle.odi.domain.mapping.component.*
import oracle.odi.domain.mapping.generator.*
import oracle.odi.domain.mapping.physical.*
import oracle.odi.mapping.generation.*
import java.sql.* 
import oracle.odi.domain.odireference.OdiRef
import oracle.odi.adapter.OdiAdapter
import oracle.odi.km.exception.OdiKMException

public class XKM_Jagged extends GroovyComponentGeneratorDelegateBase {

  protected IMapComponent component;
  protected MapPhysicalNode physicalNode;
  protected IGeneratorContext generatorContext; 
  protected List<AbstractSyntaxTree> upstreamASTList;

  protected boolean hasId 
  protected String tmpdir
  protected String delimiter
  protected Map staging_files
  protected boolean skip_task
  protected boolean use_work_table
  protected Map work_tables   

  protected mBinding = null;

  public void setBinding(Binding binding) {
    super.setBinding(binding);
    mBinding = binding;

    Map variables = binding.getVariables();  
      
    if (variables.containsKey("component")) {
      component =  mBinding.getVariable("component");
    }
    if (variables.containsKey("physicalNode")) {
      physicalNode =  mBinding.getVariable("physicalNode");
    }
    if (variables.containsKey("generatorContext")) {
      generatorContext =  mBinding.getVariable("generatorContext");
    }
    if (variables.containsKey("upstreamASTList")) {
      upstreamASTList =  mBinding.getVariable("upstreamASTList");
    }

    hasId = isIDConnected()
    mBinding.setVariable( "hasId",  hasId )

    tmpdir =  getOption("TMP_DIR")
    mBinding.setVariable( "tmpdir",  tmpdir ) 

    delimiter =  getOption("FIELD_DELIMITER")
    mBinding.setVariable( "delimiter",  delimiter )

    def eu = physicalNode.getExecutionUnit()
    def euloc = eu.getLocation() 

    def nodeloc = physicalNode.getLocation()     

    def techno = nodeloc.getTechnology().getName()
    if(techno == "File") {
      use_work_table = false
    } else {
      use_work_table = true
    } 
    mBinding.setVariable( "use_work_table",  use_work_table ) 

    def sources = physicalNode.getUpstreamConnectedNodes()
    def targets = physicalNode.getDownstreamConnectedNodes()

    targets.each { 
      def nodeTypeStr = it.getNodeType().toString()
      if (techno == "File" && nodeTypeStr  != "AP") {
        throw new OdiKMException( "Physical Design Error : Jagged component node should not be placed in the same execution unit as the target if the target is File DataStore . Please, drag Jagged node to a different execution unit") 
      }
    }
  }

//==================================
  public XKM_Jagged () {}
//==================================

  AbstractSyntaxTree SELECT(SqlQuery inputQuery) {

    staging_files = [:]
    work_tables = [:]
       
    def eu = physicalNode.getExecutionUnit()
    def euloc = eu.getLocation() 

    def nodeloc = physicalNode.getLocation()       

    component.getOutputConnectorPoints().each {currentCP ->
      def filename = currentCP.getStringPropertyValue("Serialization File")
      if (filename == null || filename == "") {
        filename = "temp_" + currentCP.getName() + "_jagged"
      }
      def staging_file = getOption("TMP_DIR") + File.separator + filename 
      staging_files[currentCP.getName()] = staging_file 

      def work_table =  currentCP.getName() + "_TMP"     
      work_tables[currentCP.getName()] = work_table
    }
    mBinding.setVariable( "staging_files",  staging_files )
    mBinding.setVariable( "work_tables",  work_tables )

    def nodeCP = physicalNode.getLogicalConnectorPoint()

    def resultTable = (Map)generatorContext.getObject(component.getName() + "_JAGGED_QUERIES");
    if (resultTable == null) {
      skip_task = false ; mBinding.setVariable( "skip_task",  skip_task ) 
      resultTable = [:]
      component.getOutputConnectorPoints().each { currentCP ->
        def outputQuery
        if (!use_work_table) {      
          outputQuery = new FileSqlQuery(new TemplateUtils((OdiAdapter)component.getRootContainer().getAdapter(), physicalNode.getAdapter().getLanguage("SQL"), physicalNode.getAdapter().getTechnology("File")))
        } else {
          outputQuery = new SqlQuery(inputQuery) 
        }

        List<ISelectItem> newselectList = selectExprList(currentCP.getName());
        outputQuery.setSelectList(newselectList)

        Table staging

        if (!use_work_table) {      
          staging = new Table(staging_files[currentCP.getName()]);
        } else {
          def tableQualifier = nodeloc == null ? null : nodeloc.getPhysicalSchema().getSchemaName()
          staging = new Table(work_tables[currentCP.getName()], tableQualifier)
        }

        def tableAlias = component.getAlias();      
        FromClause from = new FromClause(new TableReference(staging), tableAlias)
        outputQuery.getFromList().clear()
        outputQuery.addFrom(from)
                        
        if (!use_work_table) {   
          outputQuery.setJDBCMetadata(create_JDBCMetadata(staging_files[currentCP.getName()], currentCP.getName()))                               
        } 

        resultTable[currentCP] = outputQuery
      } 
      generatorContext.putObject(component.getName() + "_JAGGED_QUERIES", resultTable);

    } else {
      skip_task = true ; mBinding.setVariable( "skip_task",  skip_task )
    }
    return resultTable[nodeCP]
  }

  String getOption( String optionName ) {
    def option = null;
    if ( physicalNode.isXKMNode() ) {
      option = physicalNode.getOptionValue(ProcessingType.SOURCE, optionName)
      if ( option != null ) {
        option = option.getOptionValueString()
      }
    }
    if ( option != null ) { option = option.trim() } else { option = "" }
    return option
  }

  String getOptionOrDefault( String optionName, String defaultValue ) {
    def option = getOption(optionName);
    if ( option=="" ) option = defaultValue
    return option
  }

  List<ISelectItem> selectExprList ( String connectorPoint ) { 

    def result = new ArrayList<ISelectItem>()

    getOutputAttributes(connectorPoint).each {
      def expr = it.getName()
      StringExpression newItem = new StringExpression(expr, it, it)
      result.add(newItem)
    }
    return result
  }

  def getOutputAttributes (String connectorPoint) {
    def result = []
    component.getOutputConnectorPoint(connectorPoint).getAttributes().each {
      result.add(it)
    }
    return result
  }

  def getSourceComponent() {
    def comp
    physicalNode.getUpstreamConnectedNodes().each {
      comp =  it.getLogicalComponent()                
    }
    return comp    
  } 

  def getSourceFileDelimiter() {
    String text = ""    
    physicalNode.getUpstreamConnectedNodes().each {
      def delimiter =  it.getLogicalComponent().getBoundObject().getFileDescriptor().getFieldSeparator()
  
      def arr = delimiter.replace("\\","").split("u")
      arr[1..arr.size()-1].each {
        int hexVal = Integer.parseInt(it, 16);
        text += (char)hexVal;
      }
    }
    return text
  }

  def create_JDBCMetadata(String stagingFile, String connectorPoint) {      

    def newMeta = []
      
    def fileTechno = (ITechnology) physicalNode.getAdapter().findModelObject(ITechnology.class.getName(), null, "File")      

    newMeta.add('/*$$SNPS_START_KEY')
    newMeta.add('SNP$CRDWG_TABLE')
    newMeta.add('SNP$CRTABLE_NAME=jagged_' + connectorPoint)  
    newMeta.add('SNP$CRLOAD_FILE=' + stagingFile)
      
    newMeta.add('SNP$CRFILE_FORMAT=D')      
    newMeta.add('SNP$CRFILE_SEP_FIELD=0x' + String.format("%04x", (int) delimiter)) 
    newMeta.add('SNP$CRFILE_SEP_LINE=0x000A')
    newMeta.add('SNP$CRFILE_FIRST_ROW=1') 
    newMeta.add('SNP$CRFILE_ENC_FIELD=')
    newMeta.add('SNP$CRFILE_DEC_SEP=')

    getOutputAttributes(connectorPoint).each { 
      newMeta.add('SNP$CR')
      newMeta.add('SNP$CRDWG_COL')
      newMeta.add('SNP$CRCOL_NAME=' + it.getName())
      newMeta.add('SNP$CRTYPE_NAME=' + it.getDataType().getConvertedDataType(fileTechno).getName())
      newMeta.add('SNP$CRORDER=' + "${it.getPosition() + 1}")
      newMeta.add('SNP$CRLENGTH=' + it.getSize())
      newMeta.add('SNP$CRPRECISION=' + it.getSize())
      newMeta.add('SNP$CRACTION_ON_ERROR=NULL')
    }

    newMeta.add('SNP$CR$$')
    newMeta.add('SNPS_END_KEY*/')      

    def outputMeta = ""
    newMeta.each {
      outputMeta = outputMeta + it
    }
    return outputMeta
  }

  boolean isIDConnected () {
    def attrID = component.findInputAttribute("ID")  
    if (attrID != null && attrID.getExpression() != null) {
      return true
    } else {
      return false
    }
  }
}
            
    ]]></Field>
	<Field name="ExpectedAstClass" type="java.lang.String">null</Field>
	<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[2b79807e-31c0-489c-b5b5-f0f50a3cdd88]]></Field>
	<Field name="IndChange" type="java.lang.String"><![CDATA[U]]></Field>
	<Field name="IndExcludeExUnitBegin" type="java.lang.String">null</Field>
	<Field name="IndExcludeExUnitEnd" type="java.lang.String">null</Field>
	<Field name="IndExcludeExUnitMain" type="java.lang.String">null</Field>
	<Field name="IndExcludeMapBegin" type="java.lang.String">null</Field>
	<Field name="IndExcludeMapCleanup" type="java.lang.String">null</Field>
	<Field name="IndExcludeMapEnd" type="java.lang.String">null</Field>
	<Field name="IndGenerateLoad" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="IndIsHidden" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="IndJrnMethod" type="java.lang.String"><![CDATA[S]]></Field>
	<Field name="IndSuppSetBased" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IntgType" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[2]]></Field>
	<Field name="IsConcurrent" type="java.lang.String">null</Field>
	<Field name="IsSeeded" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IBaseCompKm" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IFolder" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IProject" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IScBaseTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IScOrigTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IScTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="ITxtDelTxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITxtTrtTxt" type="com.sunopsis.sql.DbInt"><![CDATA[20640]]></Field>
	<Field name="KimMultiDserver" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KmDefault" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KmLang" type="java.lang.String"><![CDATA[SQL]]></Field>
	<Field name="KmSrcLang" type="java.lang.String">null</Field>
	<Field name="KmSrcTechno" type="java.lang.String">null</Field>
	<Field name="KmTechno" type="java.lang.String"><![CDATA[GENERIC_SQL]]></Field>
	<Field name="KmVersion" type="java.lang.String">null</Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LkmType" type="java.lang.String"><![CDATA[N]]></Field>
	<Field name="LChecksum" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="LCode" type="java.lang.String">null</Field>
	<Field name="OggJkm" type="java.lang.String">null</Field>
	<Field name="OrdFolder" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ProcType" type="java.lang.String"><![CDATA[S]]></Field>
	<Field name="ProdAstType" type="java.lang.String"><![CDATA[oracle.odi.mapping.generation.SqlQuery]]></Field>
	<Field name="RepGuid" type="java.lang.String">null</Field>
	<Field name="RepVersion" type="java.lang.String">null</Field>
	<Field name="ScriptPath" type="java.lang.String">null</Field>
	<Field name="ScOrigTrtTag" type="java.lang.String">null</Field>
	<Field name="Subtype" type="java.lang.String"><![CDATA[*]]></Field>
	<Field name="TrtName" type="java.lang.String"><![CDATA[Copy (3) of XKM Jagged]]></Field>
	<Field name="TrtType" type="java.lang.String"><![CDATA[CK]]></Field>
	<Field name="VariableDefs" type="java.lang.String">null</Field>
	<Field name="VLastDate" type="java.sql.Timestamp">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[41a0c977-848f-4183-926c-a9fb8c0d0913]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20640]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[107]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[Jagged component KMs process unstructured data using meta pivoting. Source data, represented as key-value free format, will be transformed into more structured entities in order to be loaded into database tables or file structures. Jagged component has one input group and one or multiple output groups based on the configuration of the component. Input group is connected to a source component, which has e key-value or id-key-value structure. Output groups are connected to the target components where data is stored in more structured way, i.e. keys become column names and values are stored as table rows. Jagged KM is parsing the source data and is looking for key data matching the output group attributes. Once the relevant keys are identified the corresponding data is stored into a row. In case of key-value source each incoming record is delimited by a key marked as End of Data Indicator.  In case of id-key-value source incoming records are delimited by a new value of the sequence defined as id. Target records can be consolidated by removing duplicates based on Unique Index attribute property. Some attributes can be labelled as required, meaning no new record is stored if any of the required keys is missing. Default values can be defined for some missing keys.]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpOrigTxt">
		<Field name="GlobalId" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[107]]></Field>
	<Field name="OrigineName" type="java.lang.String"><![CDATA[Edit Command]]></Field>
	<Field name="SnpsCol" type="java.lang.String"><![CDATA[I_TXT_TRT_TXT]]></Field>
	<Field name="SnpsTable" type="java.lang.String"><![CDATA[SNP_TRT]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExprITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[995575d4-4c8b-4dab-8717-c51c6a54a479]]></Field>
	<Field name="IndChange" type="java.lang.String"><![CDATA[I]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[20642]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[20641]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[6209]]></Field>
	<Field name="IUserExitGroup" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="ShortValue" type="java.lang.String">null</Field>
	<Field name="Subtypes" type="java.lang.String">null</Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[TMP_DIR]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Directory for temporary files.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[T]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[34f0462e-e475-4b49-a334-2c4c3d0b9b31]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20641]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[110]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[/tmp]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpOrigTxt">
		<Field name="GlobalId" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[110]]></Field>
	<Field name="OrigineName" type="java.lang.String"><![CDATA[Text value]]></Field>
	<Field name="SnpsCol" type="java.lang.String"><![CDATA[I_TXT_VALUE]]></Field>
	<Field name="SnpsTable" type="java.lang.String"><![CDATA[SNP_USER_EXIT]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[f01a114a-6ce6-4955-b833-b1fe2b40d086]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20642]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[111]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[Directory for temporary files.]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpOrigTxt">
		<Field name="GlobalId" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[111]]></Field>
	<Field name="OrigineName" type="java.lang.String"><![CDATA[User Exit help]]></Field>
	<Field name="SnpsCol" type="java.lang.String"><![CDATA[I_TXT_UE_HELP]]></Field>
	<Field name="SnpsTable" type="java.lang.String"><![CDATA[SNP_USER_EXIT]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExprITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[2124ab4b-7af4-4c22-9b8e-a98d7c070821]]></Field>
	<Field name="IndChange" type="java.lang.String"><![CDATA[I]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[20644]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[20643]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[6210]]></Field>
	<Field name="IUserExitGroup" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[2]]></Field>
	<Field name="ShortValue" type="java.lang.String">null</Field>
	<Field name="Subtypes" type="java.lang.String">null</Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[FIELD_DELIMITER]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Field delimiter for temporary files.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[T]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[ef47f5c1-b8f3-429c-9e4a-58c8fec83a28]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20643]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[110]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[|]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[96d061e9-752f-4b34-b910-c0035641d865]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20644]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[111]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[Field delimiter for temporary files.]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpUserExit">
		<Field name="ExprITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[b0b72fce-00ca-40ae-86e8-329f3ddb020e]]></Field>
	<Field name="IndChange" type="java.lang.String"><![CDATA[I]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="ITxtUeHelp" type="com.sunopsis.sql.DbInt"><![CDATA[20645]]></Field>
	<Field name="ITxtValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[6211]]></Field>
	<Field name="IUserExitGroup" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="Position" type="com.sunopsis.sql.DbInt"><![CDATA[3]]></Field>
	<Field name="ShortValue" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="Subtypes" type="java.lang.String">null</Field>
	<Field name="UeName" type="java.lang.String"><![CDATA[DELETE_TEMPORARY_OBJECTS]]></Field>
	<Field name="UeSdesc" type="java.lang.String"><![CDATA[Delete temporary objects at end of mapping.]]></Field>
	<Field name="UeType" type="java.lang.String"><![CDATA[C]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[ee69c5a8-e692-4904-806a-26ad99c19bc9]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20645]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[111]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[0]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[Delete temporary objects at end of mapping.]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20646]]></Field>
	<Field name="ColLanguage" type="java.lang.String"><![CDATA[SQL]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String"><![CDATA[GENERIC_SQL]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="DefLanguage" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String">null</Field>
	<Field name="ExeChannel" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[a4dcf7bd-8098-4cf9-87d6-0ee3cabc488e]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12320]]></Field>
	<Field name="IRefLineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IRefTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="KcmAk" type="java.lang.String">null</Field>
	<Field name="KcmCond" type="java.lang.String">null</Field>
	<Field name="KcmErrDel" type="java.lang.String">null</Field>
	<Field name="KcmJoin" type="java.lang.String">null</Field>
	<Field name="KcmNull" type="java.lang.String">null</Field>
	<Field name="KcmPk" type="java.lang.String">null</Field>
	<Field name="KimDrvdSel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimIdx" type="java.lang.String">null</Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String">null</Field>
	<Field name="KjmDrop" type="java.lang.String">null</Field>
	<Field name="KjmExtend" type="java.lang.String">null</Field>
	<Field name="KjmInstall" type="java.lang.String">null</Field>
	<Field name="KjmLock" type="java.lang.String">null</Field>
	<Field name="KjmPurge" type="java.lang.String">null</Field>
	<Field name="KjmSetInstall" type="java.lang.String">null</Field>
	<Field name="KjmSetUninstall" type="java.lang.String">null</Field>
	<Field name="KjmSubscribe" type="java.lang.String">null</Field>
	<Field name="KjmTableOrder" type="java.lang.String">null</Field>
	<Field name="KjmUninstall" type="java.lang.String">null</Field>
	<Field name="KjmUnlock" type="java.lang.String">null</Field>
	<Field name="KjmUnsubscribe" type="java.lang.String">null</Field>
	<Field name="KlmAfterInt" type="java.lang.String">null</Field>
	<Field name="KlmIdx" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LineType" type="java.lang.String"><![CDATA[X]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[MC]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[60]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Clean up jagged work tables]]></Field>
	<Field name="SupportedSubtypes" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="VariableDefs" type="java.lang.String"><![CDATA[
            
if (!use_work_table) { skipTaskGeneration = true }          
def cp = physicalNode.getLogicalConnectorPoint().getName()
def loc = physicalNode.getLocation()
def euloc = physicalNode.getExecutionUnit().getLocation()                       
def tableName = work_tables[cp]
def tableQualifier = loc == null ? null : loc.getPhysicalSchema().getSchemaName()
table = new Table(tableName, tableQualifier)                                                    
              
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[2713beaa-d896-4cb4-aa78-a47c75581aee]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20646]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[ drop table $[table.getFullGeneratedName()]                                           
        ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpOrigTxt">
		<Field name="GlobalId" type="java.lang.String">null</Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="OrigineName" type="java.lang.String"><![CDATA[Source Technology]]></Field>
	<Field name="SnpsCol" type="java.lang.String"><![CDATA[COL_I_TXT]]></Field>
	<Field name="SnpsTable" type="java.lang.String"><![CDATA[SNP_LINE_TRT]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20647]]></Field>
	<Field name="ColLanguage" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="DefLanguage" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String">null</Field>
	<Field name="ExeChannel" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[64dc7610-ff1d-4c3b-a779-cfdd36ea155e]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12321]]></Field>
	<Field name="IRefLineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IRefTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="KcmAk" type="java.lang.String">null</Field>
	<Field name="KcmCond" type="java.lang.String">null</Field>
	<Field name="KcmErrDel" type="java.lang.String">null</Field>
	<Field name="KcmJoin" type="java.lang.String">null</Field>
	<Field name="KcmNull" type="java.lang.String">null</Field>
	<Field name="KcmPk" type="java.lang.String">null</Field>
	<Field name="KimDrvdSel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimIdx" type="java.lang.String">null</Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String">null</Field>
	<Field name="KjmDrop" type="java.lang.String">null</Field>
	<Field name="KjmExtend" type="java.lang.String">null</Field>
	<Field name="KjmInstall" type="java.lang.String">null</Field>
	<Field name="KjmLock" type="java.lang.String">null</Field>
	<Field name="KjmPurge" type="java.lang.String">null</Field>
	<Field name="KjmSetInstall" type="java.lang.String">null</Field>
	<Field name="KjmSetUninstall" type="java.lang.String">null</Field>
	<Field name="KjmSubscribe" type="java.lang.String">null</Field>
	<Field name="KjmTableOrder" type="java.lang.String">null</Field>
	<Field name="KjmUninstall" type="java.lang.String">null</Field>
	<Field name="KjmUnlock" type="java.lang.String">null</Field>
	<Field name="KjmUnsubscribe" type="java.lang.String">null</Field>
	<Field name="KlmAfterInt" type="java.lang.String">null</Field>
	<Field name="KlmIdx" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LineType" type="java.lang.String"><![CDATA[X]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EB]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[40]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Jagged transform]]></Field>
	<Field name="SupportedSubtypes" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="VariableDefs" type="java.lang.String"><![CDATA[
            
def convertToString (list, delimiter="|", wrap=true) {
  def str = ""        
  list.each {str = str + it + delimiter}
  if (str.size() > 0) { str = str.substring(0, str.size()-1) }                    
  if (wrap) {str = '"' + str + '"'}
  return str             
}

def getOutputAttributes (String connectorPoint) {
  def result = []
  component.getOutputConnectorPoint(connectorPoint).getAttributes().each {
    result.add(it)
  }
  return result
}

def findInputAttribute (String attributeName) {
  return component.getInputConnectorPoint(0).findAttribute(attributeName)                  
}

if (!skip_task) {
  input_key = '"' + findInputAttribute("KEY").getExpression().getReferencedObjects()[0].getName() + '"'
  input_value = '"' + findInputAttribute("VALUE").getExpression().getReferencedObjects()[0].getName() + '"'
  if (hasId) {
    input_id = '"' + findInputAttribute("ID").getExpression().getReferencedObjects()[0].getName() + '"' 
  } else {
    input_id = '"' + "" + '"' 
  }

  edi = '"' + component.getStringPropertyValue("End of Data Indicator") + '"'
  delimiter =  '"' + delimiter + '"'

  def staging_files_list = []
  def connector_points = []
  def consolidate = []
  def columns = []
  def key_columns = [] 
  def req_columns = []
  def rowid_columns = []
  def default_columns = []
  def default_values = []

  component.getOutputConnectorPoints().each {currentCP ->
    connector_points.add(currentCP.getName())

    def isConsolidate = currentCP.getBooleanPropertyValue("Consolidate Data")
    consolidate.add(isConsolidate)

    staging_files_list.add(staging_files[currentCP.getName()])

    def col = []
    def key_col = [] 
    def req_col = []
    def rowid_col
    def def_col = [] 
    def def_val = []

    getOutputAttributes(currentCP.getName()).each {
      if (it.getBooleanPropertyValue("Unique Index")) {
        key_col.add(it.getName())  
      }
      if (it.getBooleanPropertyValue("Required")) {
        req_col.add(it.getName())  
      }
      if (it.getBooleanPropertyValue("Record Id")) {
        rowid_col=it.getName()
      }
      def default_value = it.getStringPropertyValue("Default")             
      if (default_value != null && default_value != "") {
        def_col.add(it.getName())
        def_val.add(default_value) 
      }
      col.add(it.getName()) 
    }
    columns.add(convertToString(col, "&", false))
    key_columns.add(convertToString(key_col, "&", false)+" ")
    req_columns.add(convertToString(req_col, "&", false)+" ")
    if (rowid_col == null)  {rowid_col = ""}           
    rowid_columns.add(rowid_col)
    default_columns.add(convertToString(def_col, "&", false)+" ")
    default_values.add(convertToString(def_val, "&", false)+" ")                                  
  }

  strStagingFiles = convertToString(staging_files_list)        
  strConnectorPoints = convertToString(connector_points)  
  strConsolidate = convertToString(consolidate)            
  strColumns= convertToString(columns)        
  strKeyColumns = convertToString(key_columns)  
  strReqColumns = convertToString(req_columns)
  strRowidColumns = convertToString(rowid_columns)
  strDefautColumns = convertToString(default_columns)            
  strDefautValues = convertToString(default_values) 
} else { skipTaskGeneration = true }              
                      
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[82160e81-88b3-43b4-bc20-66aa55cced2b]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20647]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[ 
def build_full_record ( connector_point, record , columns, rowidcol, rowid, defaults ) { 
  columns.each {
    if (record[it] == null) {
      if (it == rowidcol && rowid != null) {
        record[it] = rowid   
      } else { 
        def default_value       
        if ( defaults.containsKey(it) ) {  
          default_value = defaults[it]
        }
        if (default_value == null) {default_value = ""} 
        record[it] = default_value 
      }
    }
  }
  return record
}

def build_record_string ( record , columns, delimiter ) {
  def str = ""           
  columns.each {
    str = str + record[it] + delimiter
  }      
  return str.substring(0, str.size())               
}

def stagingFileNames = [:]
def stsplit = $[strStagingFiles].split("\\|")
def cpsplit = $[strConnectorPoints].split("\\|")                

[cpsplit, stsplit].transpose().each { 
  stagingFileNames[it.getAt(0)] = it.getAt(1)
}

def consolidateProp = [:]
def cosplit = $[strConsolidate].split("\\|")        

[cpsplit, cosplit].transpose().each { 
  consolidateProp[it.getAt(0)] = it.getAt(1) 
}

columns = [:]
def colsplit = $[strColumns].split("\\|")

[cpsplit, colsplit].transpose().each {
  if (it.getAt(1) != "") { 
    columns[it.getAt(0)] = it.getAt(1).split("\\&")
  } else {
    columns[it.getAt(0)] = []
  }
}

def pkeycols = [:]
def pcolsplit = $[strKeyColumns].split("\\|")

[cpsplit, pcolsplit].transpose().each {
  if (it.getAt(1).trim() != "") {
    def cols = []
    it.getAt(1).split("\\&").each {cols.add(it.trim())}
    pkeycols[it.getAt(0)] = cols
  } else {
    pkeycols[it.getAt(0)] = []
  }
}

def requiredcols = [:]
def rcolsplit = $[strReqColumns].split("\\|")

[cpsplit, rcolsplit].transpose().each { 
  if (it.getAt(1).trim() != "") { 
    def cols = []
    it.getAt(1).split("\\&").each {cols.add(it.trim())} 
    requiredcols[it.getAt(0)] = cols
  } else {
    requiredcols[it.getAt(0)] = []
  }
}

def rowidcols = [:]
def ridcolsplit = $[strRowidColumns].split("\\|")        

[cpsplit, ridcolsplit].transpose().each { 
  rowidcols[it.getAt(0)] = it.getAt(1) 
}

def defaults = [:]
def dcsplit = $[strDefautColumns].split("\\|")
def dvsplit = $[strDefautValues].split("\\|")               

[cpsplit, dcsplit, dvsplit].transpose().each {
  def cp_def_list = [:]
  [it.getAt(1).split("\\&"),it.getAt(2).split("\\&")].transpose().each {
    if (it.getAt(0).trim() != "") { 
      cp_def_list[it.getAt(0).trim()] = it.getAt(1).trim()
    }
  }
  defaults[it.getAt(0)] = cp_def_list
}

String delimiter = $[delimiter] 

def hasId = $[hasId]
def edi = $[edi]
def use_work = $[use_work_table]

def key_attr = $[input_key]
def value_attr = $[input_value]
def id_attr = $[input_id]       

def staging_files = [:]

def records = [:] 

connectorPoints = [:] 
all_records_consolidated = [:]
all_records = [:]

stagingFileNames.each { cp ->
   
  File staging = new File (stagingFileNames[cp.key])  
  if (!staging.exists()) {staging.createNewFile()} else {staging.delete()} 
  staging_files[cp.key] = staging

  def consolidate = Boolean.valueOf(consolidateProp[cp.key])
    
  connectorPoints[cp.key] = consolidate && pkeycols[cp.key].size() > 0

  if (connectorPoints[cp.key]) {
    pkeycols[cp.key].each {
      if (!requiredcols[cp.key].contains(it)) { requiredcols[cp.key].add(it) }
    }
  }

  def header = ""
  columns[cp.key].each {
    header = header + it + delimiter
  }
  staging.append(header.substring(0, header.size()-1) + "\n")

  records[cp.key] = [:]
  all_records_consolidated[cp.key] = [:]
  all_records[cp.key] = []
}

def src_id, src_key, src_value
def first = true                
def old_id, new_id

def add_to_record = { 
  it.each { cp, cons ->
    columns[cp].each {
      if ( it == src_key ) {
        records[cp][src_key] = src_value
      }
    }
  }
}
              
def log_current_record = {
  it.each { cp, cons ->
    def required_data_available = true
    requiredcols[cp].each {
      if (!records[cp].containsKey(it)) {required_data_available = false}      
    }
    if (required_data_available) {
      def full_record = build_full_record ( cp, records[cp], columns[cp], rowidcols[cp], old_id, defaults[cp])
      if (!cons && !use_work) { 
        staging_files[cp].append(build_record_string(full_record, columns[cp], delimiter) + "\n")
      } else {
        if (cons) {
          def index = []
          pkeycols[cp].each { index.add(full_record[it])}
          all_records_consolidated[cp][index] = full_record 
        } else {
          all_records[cp].add(full_record)
        }
      }
    }
    records [cp] = [:]      
  }
}

def log_all_records = {
  it.each { cp, cons ->
    if (cons) {
      all_records_consolidated[cp].each {
        staging_files[cp].append(build_record_string(it.value, columns[cp], delimiter) + "\n")
      }
    } else {
      all_records[cp].each {       
        staging_files[cp].append(build_record_string(it, columns[cp], delimiter) + "\n") 
      }
    }
  }
}

def srcMeta = sourceData.getMetaData()
def colcount = srcMeta.getColumnCount()

while (sourceData.next()) { 

  if ( hasId ) {
    src_id = sourceData.getString(sourceData.findColumn(id_attr.toUpperCase()))
    src_key = sourceData.getString(sourceData.findColumn(key_attr.toUpperCase()))             
    src_value = sourceData.getString(sourceData.findColumn(value_attr.toUpperCase()))
    if (src_id != null) {src_id = src_id.trim()}       
    if (src_key != null) {src_key = src_key.trim()}
    if (src_value != null) {src_value = src_value.trim()} 

    new_id = src_id 

    if (first) {
      old_id = src_id
      first = false
    }
    if (!new_id.equals(old_id)) {
      log_current_record (connectorPoints)
      if (new_id != "") {      
        old_id = new_id
      } else { continue }
    }
    add_to_record (connectorPoints)  

  } else { 
    src_key = sourceData.getString(sourceData.findColumn(key_attr.toUpperCase()))        
    src_value = sourceData.getString(sourceData.findColumn(value_attr.toUpperCase()))
    if (src_key != null) {src_key = src_key.trim()}
    if (src_value != null) {src_value = src_value.trim()}       
    if (src_key.equals(edi)) {
      if (first) {
        first = false
      } else {
        log_current_record (connectorPoints)
      }
    }
    add_to_record (connectorPoints)  
  }
} 

log_current_record (connectorPoints) 
log_all_records (connectorPoints)                                                          
        ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20648]]></Field>
	<Field name="ColLanguage" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="DefLanguage" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String">null</Field>
	<Field name="ExeChannel" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[b5e59b07-2549-4065-a0dd-9ab0f25c1cb2]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12322]]></Field>
	<Field name="IRefLineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IRefTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="KcmAk" type="java.lang.String">null</Field>
	<Field name="KcmCond" type="java.lang.String">null</Field>
	<Field name="KcmErrDel" type="java.lang.String">null</Field>
	<Field name="KcmJoin" type="java.lang.String">null</Field>
	<Field name="KcmNull" type="java.lang.String">null</Field>
	<Field name="KcmPk" type="java.lang.String">null</Field>
	<Field name="KimDrvdSel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimIdx" type="java.lang.String">null</Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String">null</Field>
	<Field name="KjmDrop" type="java.lang.String">null</Field>
	<Field name="KjmExtend" type="java.lang.String">null</Field>
	<Field name="KjmInstall" type="java.lang.String">null</Field>
	<Field name="KjmLock" type="java.lang.String">null</Field>
	<Field name="KjmPurge" type="java.lang.String">null</Field>
	<Field name="KjmSetInstall" type="java.lang.String">null</Field>
	<Field name="KjmSetUninstall" type="java.lang.String">null</Field>
	<Field name="KjmSubscribe" type="java.lang.String">null</Field>
	<Field name="KjmTableOrder" type="java.lang.String">null</Field>
	<Field name="KjmUninstall" type="java.lang.String">null</Field>
	<Field name="KjmUnlock" type="java.lang.String">null</Field>
	<Field name="KjmUnsubscribe" type="java.lang.String">null</Field>
	<Field name="KlmAfterInt" type="java.lang.String">null</Field>
	<Field name="KlmIdx" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LineType" type="java.lang.String"><![CDATA[X]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EB]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[30]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Get data from source]]></Field>
	<Field name="SupportedSubtypes" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="VariableDefs" type="java.lang.String"><![CDATA[
            
if (!skip_task) {
  def query = upstreamASTList.get(0)

  if (use_work_table) {
    if (hasId) {
      def expr = component.findInputAttribute("ID").getExpression()
            	    ArrayExpression sorterCond = new ArrayExpression(physicalNode, expr, query)
      query = query.addSorter(sorterCond)
    }
    strQuery = serializationLibrary.stringifyQuery(query)            
    strQuery = "'" + strQuery.substring(1, strQuery.size()-1) + "'" 
  } else {
    strQuery = serializationLibrary.stringifyQuery(query) 
  }  
} else { skipTaskGeneration = true }                                 
             
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[81f3283f-25a7-4bc4-afa7-8785fd871115]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20648]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[ 
def conn = odiRef.getJDBCConnection( "SRC" )
def st  = conn.createStatement();
def query = $[strQuery]    
sourceData  = st.executeQuery(query);
conn.close()            
        ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20649]]></Field>
	<Field name="ColLanguage" type="java.lang.String"><![CDATA[SQL]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String"><![CDATA[GENERIC_SQL]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="DefLanguage" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String">null</Field>
	<Field name="ExeChannel" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[ec538b8a-f6ff-4783-b5ac-d431f7192573]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12323]]></Field>
	<Field name="IRefLineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IRefTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="KcmAk" type="java.lang.String">null</Field>
	<Field name="KcmCond" type="java.lang.String">null</Field>
	<Field name="KcmErrDel" type="java.lang.String">null</Field>
	<Field name="KcmJoin" type="java.lang.String">null</Field>
	<Field name="KcmNull" type="java.lang.String">null</Field>
	<Field name="KcmPk" type="java.lang.String">null</Field>
	<Field name="KimDrvdSel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimIdx" type="java.lang.String">null</Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String">null</Field>
	<Field name="KjmDrop" type="java.lang.String">null</Field>
	<Field name="KjmExtend" type="java.lang.String">null</Field>
	<Field name="KjmInstall" type="java.lang.String">null</Field>
	<Field name="KjmLock" type="java.lang.String">null</Field>
	<Field name="KjmPurge" type="java.lang.String">null</Field>
	<Field name="KjmSetInstall" type="java.lang.String">null</Field>
	<Field name="KjmSetUninstall" type="java.lang.String">null</Field>
	<Field name="KjmSubscribe" type="java.lang.String">null</Field>
	<Field name="KjmTableOrder" type="java.lang.String">null</Field>
	<Field name="KjmUninstall" type="java.lang.String">null</Field>
	<Field name="KjmUnlock" type="java.lang.String">null</Field>
	<Field name="KjmUnsubscribe" type="java.lang.String">null</Field>
	<Field name="KlmAfterInt" type="java.lang.String">null</Field>
	<Field name="KlmIdx" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LineType" type="java.lang.String"><![CDATA[X]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[MB]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[20]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Create jagged work table]]></Field>
	<Field name="SupportedSubtypes" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="VariableDefs" type="java.lang.String"><![CDATA[
            
if (!use_work_table) { skipTaskGeneration = true } 

def cp = physicalNode.getLogicalConnectorPoint().getName()
def loc = physicalNode.getLocation()
def euloc = physicalNode.getExecutionUnit().getLocation()                         
def tech = loc.getTechnology()          
def tableName = work_tables[cp]  
def tableQualifier = loc == null ? null : loc.getPhysicalSchema().getSchemaName()
table = new Table(tableName, tableQualifier)            
cols = "\n\t"  
component.getOutputConnectorPoint(cp).getAttributes().each {
  def size = it.getSize()
  def scale = it.getScale()           
  cols = cols + it.getName() + "\t"
  // cols = cols + it.getDataType().getConvertedDataType(tech).getName()
  // if (size != null) { cols = cols + "(" + size + ")" }             
  cols = cols + it.getDdlDataType()             
  cols = cols + ",\n\t" 
}
cols =  cols.substring(0, cols.size()-3) + "\n\t"
             
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[1080a71a-664e-4456-b2c5-9bddbcc45212]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20649]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[ create table $[table.getFullGeneratedName()] ($[cols])  
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20650]]></Field>
	<Field name="ColLanguage" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="DefLanguage" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String">null</Field>
	<Field name="ExeChannel" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[f3d8eff7-1c5d-41c6-aa64-2207abbd65c8]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12324]]></Field>
	<Field name="IRefLineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IRefTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="KcmAk" type="java.lang.String">null</Field>
	<Field name="KcmCond" type="java.lang.String">null</Field>
	<Field name="KcmErrDel" type="java.lang.String">null</Field>
	<Field name="KcmJoin" type="java.lang.String">null</Field>
	<Field name="KcmNull" type="java.lang.String">null</Field>
	<Field name="KcmPk" type="java.lang.String">null</Field>
	<Field name="KimDrvdSel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimIdx" type="java.lang.String">null</Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String">null</Field>
	<Field name="KjmDrop" type="java.lang.String">null</Field>
	<Field name="KjmExtend" type="java.lang.String">null</Field>
	<Field name="KjmInstall" type="java.lang.String">null</Field>
	<Field name="KjmLock" type="java.lang.String">null</Field>
	<Field name="KjmPurge" type="java.lang.String">null</Field>
	<Field name="KjmSetInstall" type="java.lang.String">null</Field>
	<Field name="KjmSetUninstall" type="java.lang.String">null</Field>
	<Field name="KjmSubscribe" type="java.lang.String">null</Field>
	<Field name="KjmTableOrder" type="java.lang.String">null</Field>
	<Field name="KjmUninstall" type="java.lang.String">null</Field>
	<Field name="KjmUnlock" type="java.lang.String">null</Field>
	<Field name="KjmUnsubscribe" type="java.lang.String">null</Field>
	<Field name="KlmAfterInt" type="java.lang.String">null</Field>
	<Field name="KlmIdx" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LineType" type="java.lang.String"><![CDATA[X]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EB]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[50]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Load work table]]></Field>
	<Field name="SupportedSubtypes" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="VariableDefs" type="java.lang.String"><![CDATA[
            
if (!use_work_table) { skipTaskGeneration = true }             
                  
cp = physicalNode.getLogicalConnectorPoint().getName()
def loc = physicalNode.getLocation()
def euloc = physicalNode.getExecutionUnit().getLocation()                         
def tableName = work_tables[cp]             
def tableQualifier = loc == null ? null : loc.getPhysicalSchema().getSchemaName()
table = new Table(tableName, tableQualifier) 
cp = '"' + cp + '"'                                                                                             
             
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[e3da484f-d8f0-4ba0-ad9e-c6dd8929036e]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20650]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[ 
boolean consolidate = connectorPoints[$[cp]] 
def cols = columns[$[cp]]
def insert_statement = "insert into $[table.getFullGeneratedName()] (" 
cols.each { insert_statement = insert_statement + it + "," }
insert_statement =  insert_statement.substring(0, insert_statement.size()-1) + ") values ("
cols.each { insert_statement = insert_statement + "?" + "," }       
insert_statement =  insert_statement.substring(0, insert_statement.size()-1) + ")"       

def conn = odiRef.getJDBCConnection( "SRC" )
def st  = conn.prepareStatement(insert_statement)
if (!consolidate) {
  all_records[$[cp]].each { rec ->
    int i = 0
    cols.each { col ->
      i++
      st.setString (i, rec[col])      
    }
    st.addBatch();      
  }
} else {
  all_records_consolidated[$[cp]].each { rec ->
    int i = 0
    cols.each { col ->
      i++
      st.setString (i, rec.value[col])      
    }
    st.addBatch();       
  }
}
int[] result = st.executeBatch()
conn.close()                             
        ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20651]]></Field>
	<Field name="ColLanguage" type="java.lang.String"><![CDATA[SQL]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String"><![CDATA[GENERIC_SQL]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="DefLanguage" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String">null</Field>
	<Field name="ExeChannel" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[498d2d83-60c9-4f35-a7ea-781d579dbd9d]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12325]]></Field>
	<Field name="IRefLineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IRefTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="KcmAk" type="java.lang.String">null</Field>
	<Field name="KcmCond" type="java.lang.String">null</Field>
	<Field name="KcmErrDel" type="java.lang.String">null</Field>
	<Field name="KcmJoin" type="java.lang.String">null</Field>
	<Field name="KcmNull" type="java.lang.String">null</Field>
	<Field name="KcmPk" type="java.lang.String">null</Field>
	<Field name="KimDrvdSel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimIdx" type="java.lang.String">null</Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String">null</Field>
	<Field name="KjmDrop" type="java.lang.String">null</Field>
	<Field name="KjmExtend" type="java.lang.String">null</Field>
	<Field name="KjmInstall" type="java.lang.String">null</Field>
	<Field name="KjmLock" type="java.lang.String">null</Field>
	<Field name="KjmPurge" type="java.lang.String">null</Field>
	<Field name="KjmSetInstall" type="java.lang.String">null</Field>
	<Field name="KjmSetUninstall" type="java.lang.String">null</Field>
	<Field name="KjmSubscribe" type="java.lang.String">null</Field>
	<Field name="KjmTableOrder" type="java.lang.String">null</Field>
	<Field name="KjmUninstall" type="java.lang.String">null</Field>
	<Field name="KjmUnlock" type="java.lang.String">null</Field>
	<Field name="KjmUnsubscribe" type="java.lang.String">null</Field>
	<Field name="KlmAfterInt" type="java.lang.String">null</Field>
	<Field name="KlmIdx" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LineType" type="java.lang.String"><![CDATA[X]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[MB]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[10]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Drop jagged work table]]></Field>
	<Field name="SupportedSubtypes" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="VariableDefs" type="java.lang.String"><![CDATA[
            
if (!use_work_table) { skipTaskGeneration = true }          
      
def cp = physicalNode.getLogicalConnectorPoint().getName() 
def loc = physicalNode.getLocation()
def euloc = physicalNode.getExecutionUnit().getLocation()                     
def tableName = work_tables[cp]
def tableQualifier = loc == null ? null : loc.getPhysicalSchema().getSchemaName()            
table = new Table(tableName, tableQualifier)
              
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[f0661028-cf9a-4f09-8b43-a0625b9fdf5b]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20651]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[ drop table $[table.getFullGeneratedName()]  
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrt">
		<Field name="AlwaysExe" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="ColITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20652]]></Field>
	<Field name="ColLanguage" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechno" type="java.lang.String"><![CDATA[GROOVY]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefITxt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="DefLanguage" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String">null</Field>
	<Field name="DefTechno" type="java.lang.String">null</Field>
	<Field name="ExeChannel" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="FirstUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[bdb7f32a-91d9-431a-8c77-7c140c404958]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12326]]></Field>
	<Field name="IRefLineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IRefTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[1915]]></Field>
	<Field name="KcmAk" type="java.lang.String">null</Field>
	<Field name="KcmCond" type="java.lang.String">null</Field>
	<Field name="KcmErrDel" type="java.lang.String">null</Field>
	<Field name="KcmJoin" type="java.lang.String">null</Field>
	<Field name="KcmNull" type="java.lang.String">null</Field>
	<Field name="KcmPk" type="java.lang.String">null</Field>
	<Field name="KimDrvdSel" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimIdx" type="java.lang.String">null</Field>
	<Field name="KimJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KimJrnPop" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KjmCreate" type="java.lang.String">null</Field>
	<Field name="KjmDrop" type="java.lang.String">null</Field>
	<Field name="KjmExtend" type="java.lang.String">null</Field>
	<Field name="KjmInstall" type="java.lang.String">null</Field>
	<Field name="KjmLock" type="java.lang.String">null</Field>
	<Field name="KjmPurge" type="java.lang.String">null</Field>
	<Field name="KjmSetInstall" type="java.lang.String">null</Field>
	<Field name="KjmSetUninstall" type="java.lang.String">null</Field>
	<Field name="KjmSubscribe" type="java.lang.String">null</Field>
	<Field name="KjmTableOrder" type="java.lang.String">null</Field>
	<Field name="KjmUninstall" type="java.lang.String">null</Field>
	<Field name="KjmUnlock" type="java.lang.String">null</Field>
	<Field name="KjmUnsubscribe" type="java.lang.String">null</Field>
	<Field name="KlmAfterInt" type="java.lang.String">null</Field>
	<Field name="KlmIdx" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="KlmJrn" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp"><![CDATA[2019-10-25 15:09:11.0]]></Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="LineType" type="java.lang.String"><![CDATA[X]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[MC]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[70]]></Field>
	<Field name="SqlName" type="java.lang.String"><![CDATA[Clean up jagged work files]]></Field>
	<Field name="SupportedSubtypes" type="java.lang.String"><![CDATA[SELECT]]></Field>
	<Field name="VariableDefs" type="java.lang.String"><![CDATA[
            
def cp = physicalNode.getLogicalConnectorPoint().getName()                      
fileName = '"' + staging_files[cp] + '"'                     
             
       ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpTxtHeader">
		<Field name="Enc" type="java.lang.String">null</Field>
	<Field name="EncKey" type="java.lang.String">null</Field>
 <Field name="EncKeyVect" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[5ad2c2bc-9537-4d8a-9bc6-805f877c2dfc]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[20652]]></Field>
	<Field name="ITxtOrig" type="com.sunopsis.sql.DbInt"><![CDATA[103]]></Field>
	<Field name="SqlIndGrp" type="java.lang.String"><![CDATA[2]]></Field>
 <Field name="Txt" type="java.lang.String"><![CDATA[ 
def file_to_remove = new File ($[fileName])
file_to_remove.delete()
        ]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrtUe">
		<Field name="GlobalId" type="java.lang.String"><![CDATA[6d16a265-d7b7-4950-a448-02f862aa7069]]></Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12320]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[6211]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpLineTrtUe">
		<Field name="GlobalId" type="java.lang.String"><![CDATA[64b6933d-a233-4ee3-954f-6b1694b34bfb]]></Field>
	<Field name="ILineTrt" type="com.sunopsis.sql.DbInt"><![CDATA[12326]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IUserExit" type="com.sunopsis.sql.DbInt"><![CDATA[6211]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20640]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[41a0c977-848f-4183-926c-a9fb8c0d0913]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TRT.1915]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[2b79807e-31c0-489c-b5b5-f0f50a3cdd88]]></Field>
 <Field name="RefObjFQName" type="java.lang.String"><![CDATA[Copy (3) of XKM Jagged]]></Field>
 <Field name="RefObjFQType" type="java.lang.String"><![CDATA[SNP_TRT]]></Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String"><![CDATA[22]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20642]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[f01a114a-6ce6-4955-b833-b1fe2b40d086]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20641]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[34f0462e-e475-4b49-a334-2c4c3d0b9b31]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20644]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[96d061e9-752f-4b34-b910-c0035641d865]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20643]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[ef47f5c1-b8f3-429c-9e4a-58c8fec83a28]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_ORIGTXT.110]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String">null</Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_ORIGTXT.111]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String">null</Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20645]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[ee69c5a8-e692-4904-806a-26ad99c19bc9]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20646]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[2713beaa-d896-4cb4-aa78-a47c75581aee]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20647]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[82160e81-88b3-43b4-bc20-66aa55cced2b]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_ORIGTXT.103]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String">null</Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20648]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[81f3283f-25a7-4bc4-afa7-8785fd871115]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20649]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[1080a71a-664e-4456-b2c5-9bddbcc45212]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20650]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[e3da484f-d8f0-4ba0-ad9e-c6dd8929036e]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20651]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[f0661028-cf9a-4f09-8b43-a0625b9fdf5b]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_TXTHEADER.20652]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[5ad2c2bc-9537-4d8a-9bc6-805f877c2dfc]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_USEREXIT.6211]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[b0b72fce-00ca-40ae-86e8-329f3ddb020e]]></Field>
 <Field name="RefObjFQName" type="java.lang.String"><![CDATA[Copy (3) of XKM Jagged.DELETE_TEMPORARY_OBJECTS]]></Field>
 <Field name="RefObjFQType" type="java.lang.String"><![CDATA[SNP_TRT.SNP_USEREXIT]]></Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String"><![CDATA[22.24]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_LINETRT.12320]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[a4dcf7bd-8098-4cf9-87d6-0ee3cabc488e]]></Field>
 <Field name="RefObjFQName" type="java.lang.String"><![CDATA[Copy (3) of XKM Jagged.Clean up jagged work tables]]></Field>
 <Field name="RefObjFQType" type="java.lang.String"><![CDATA[SNP_TRT.SNP_LINETRT]]></Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String"><![CDATA[22.27]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_LINETRT.12326]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[bdb7f32a-91d9-431a-8c77-7c140c404958]]></Field>
 <Field name="RefObjFQName" type="java.lang.String"><![CDATA[Copy (3) of XKM Jagged.Clean up jagged work files]]></Field>
 <Field name="RefObjFQType" type="java.lang.String"><![CDATA[SNP_TRT.SNP_LINETRT]]></Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String"><![CDATA[22.26]]></Field>
</Object>
<Object class="com.sunopsis.dwg.DwgExportSummary">
		<Field name="ExpTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="InstObjNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="JoinColNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="JoinNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="KeyColNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="KeyNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="LinkDiagNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="MorigTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="MtxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OrigTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[13]]></Field>
	<Field name="OtherObjectsNb" type="com.sunopsis.sql.DbInt"><![CDATA[13]]></Field>
	<Field name="PlanAgentNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="StepNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="TxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[13]]></Field>
	<Field name="UeOrigNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="UeUsedNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="VarPlanAgentNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="ScenTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OdiVersion" type="java.lang.String"><![CDATA[12.2.1]]></Field>
	<Field name="OriginRepositoryID" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="RepositoryVersion" type="java.lang.String"><![CDATA[05.02.02.08]]></Field>
</Object>
</SunopsisExport>
