plugins {
   id 'groovy'
   id 'maven-publish'
   id 'java-gradle-plugin'
   id "pl.allegro.tech.build.axion-release" version "1.9.2"
   id 'org.unbroken-dome.test-sets' version '1.5.1'
   id "com.github.johnrengelman.shadow" version "2.0.4"
   id "com.github.ben-manes.versions" version "0.20.0"
   id "com.redpillanalytics.gradle-analytics" version "1.1.6"
}

scmVersion {

   tag {
      prefix = 'v'
      versionSeparator = ''
   }
   ignoreUncommittedChanges = false
}

//set Gradle version to SCM Version
allprojects {
   project.version = scmVersion.version
}

dependencies {

   // basic Groovy/Gradle stuff
   compile group: 'org.codehaus.groovy', name: 'groovy-all', version: '2.4.12'
   compile group: 'org.slf4j', name: 'slf4j-simple', version: '+'
   compile group: 'org.eclipse.jgit', name: 'org.eclipse.jgit', version: '+'

   compile 'odi-sdk:odi-core:+'
   compile 'oracle-common:jps-api:+'
//   compile 'odi-sdk:odi-connector:+'
//   compile 'odi-sdk:odi-cpld:+'
//   compile 'odi-sdk:odi-jse:+'
//   compile 'odi-sdk:odi-jaxrsi:+'


   // ODI SDK common libraries
   compile 'bsh:bsh:+'
   compile 'org.apache-extras.beanshell:bsh:+'
   compile 'org.apache.karaf.eik.plugins:org.apache.commons.collections:3.2.1'
   compile 'org.springframework:spring-tx:+'
   compile 'com.fasterxml.jackson.core:jackson-core:+'
   compile 'com.fasterxml.jackson.core:jackson-databind:+'
   compile 'org.glassfish:javax.json:+'
   compile 'org.eclipse.persistence:javax.persistence:+'
   compile 'javax.persistence:javax.persistence-api:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.asm:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.core:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.jpa.jpql:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.jpa.modelgen.processor:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.nosql:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.oracle:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.oracle.nosql:+'
   compile 'org.eclipse.persistence:org.eclipse.persistence.oracleddlparser:+'
   compile 'org.ops4j.pax.runner:pax-runner-no-jcl:+'

   testCompile('org.spockframework:spock-core:1.1-groovy-2.4')
}

// Default artifact naming.
group = 'com.redpillanalytics'

repositories {
   jcenter()
   maven {
      url releaseUrl
      authentication {
         awsIm(AwsImAuthentication)
      }
   }
}

// Options for all tests
tasks.withType(Test) {
   ignoreFailures true
   testLogging.showStandardStreams true
}
